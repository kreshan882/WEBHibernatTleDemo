 ALTER TABLE EPIC_TLE_CHANNEL_OPERATION_ME RENAME TO EPIC_TLE_CHANNEL_OPR_METHOD ;


 CREATE TABLE EPIC_TLE_USER_PASSWORD_HISTORY (
 PASSWORD_HISTORY_ID INT NOT NULL,
 PREVIOUS_PASSWORD varchar2(255) DEFAULT NULL,
 USERID INT DEFAULT NULL,
 CERATED_DATE TIMESTAMP DEFAULT SYSDATE)
 TABLESPACE "USERS" ;  
  

  CREATE UNIQUE INDEX "EPICTLENEW"."PRIMARY00100" ON "EPICTLENEW"."EPIC_TLE_USER_PASSWORD_HISTORY" ("PASSWORD_HISTORY_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
  
  ALTER TABLE "EPICTLENEW"."EPIC_TLE_USER_PASSWORD_HISTORY" ADD CONSTRAINT "PRIMARY00100" PRIMARY KEY ("PASSWORD_HISTORY_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  
  
  
  ALTER TABLE EPIC_TLE_USER ADD LR_UPDATED_TIMESTAMP TIMESTAMP DEFAULT SYSDATE;
  ALTER TABLE EPIC_TLE_USER ADD FAILURE_LOGIN_COUNT INT DEFAULT 0; 
  ALTER TABLE EPIC_TLE_USER ADD L_PASS_CHANGE_DATE TIMESTAMP DEFAULT SYSDATE ;
  ALTER TABLE EPIC_TLE_USER ADD EMAIL VARCHAR2(255) DEFAULT NULL;
  ALTER TABLE EPIC_TLE_USER ADD L_PASS_RESET_DATE TIMESTAMP DEFAULT SYSDATE;
  ALTER TABLE EPIC_TLE_USER ADD RAND_VAL VARCHAR2(50) DEFAULT '313D94DDA020D2BE5F4C02E5C0B29368';
  
  
  ALTER TABLE EPIC_TLE_INITCONFIG ADD NUM_OF_PASS_ATTEMPTS INT DEFAULT 3;
  ALTER TABLE EPIC_TLE_INITCONFIG ADD USR_PASS_EXP_TIME VARCHAR2(800) DEFAULT '90';
  ALTER TABLE EPIC_TLE_INITCONFIG ADD USER_ACCOUNT_LOCK_TIME INT DEFAULT 30;
  ALTER TABLE EPIC_TLE_INITCONFIG ADD PASS_RESET_MAIL_TEMPLATE NVARCHAR2(2000);
  ALTER TABLE EPIC_TLE_INITCONFIG ADD EMAIL_GW_PORT INT DEFAULT 25;
  ALTER TABLE EPIC_TLE_INITCONFIG ADD USR_TMP_PASS_EXP_TIME INT DEFAULT 24;
  
  ALTER TABLE EPIC_TLE_HISTORY ADD SECTION VARCHAR2(4);
  ALTER TABLE EPIC_TLE_HISTORY ADD OLD_VALUE NVARCHAR2(2000);
  ALTER TABLE EPIC_TLE_HISTORY ADD NEW_VALUE NVARCHAR2(2000);
  
  ALTER TABLE EPIC_TLE_USER MODIFY PASSWORD NVARCHAR2(250);
  
  
  UPDATE EPIC_TLE_INITCONFIG SET PASS_RESET_MAIL_TEMPLATE = 'Epic|TLE - User Password Reset@<html><body><div class="main-mail" style="font-family: sans-serif;background-color: #ffffff;padding: 15px;margin: 15px; box-shadow: 0px 0px 6px 2px rgba(96, 125, 139, 0.33), inset 0px -10px 0 #607D8B;width: 50%;"><div><img width="150" height="50" src="https://lh3.googleusercontent.com/03LUh4yw9BcEPEPOlI37geI7Oia9XPyxx9ly8Ggxv48WD4kyvuJeD2Q2fiYspQnmzfN1SS1SPNaBBYi0fwGPb6J8ERfaPUEfzPlwJUsmZRXw0TT3iYoMfZhLlEzbm22a97vD39mxkxweJK2t5W8dYKY91dndy0qe-iA_nu7VcPZN2TMAtuXI4UaWu_zCYd5tyHe6j0T5Wc3MqJtvsnC3GqHH3EJLZhZ5tkwHsFrKGeZXXRWG3lnSwBTqd2xjKvZXGeivVAct8fidjM9qXiBJzm7Bwz6AWh2Xe41hjfyLsiFtu8QSW3_S0Zk-J4wBw_WVOZGZhbZXUZ3VVHgwkBOjFD0Bt-RTo0lAV_eaZGu--LLYcxdKjqyivmlHSTO5tFDLdhQ6hqtOC2s1ER_dywkWDaI1mbS3l2FwwYj-4X2DLufrAvUywelrIjP8Cci87VRVmNRkOZ0VyGyO5vZuroSYXG0TBZedJk9jesQe_tf3DLeCIFvU9hm0lLtykAHxJVZacu1Dv1RLMuE7ALh7Xhn4OXdFJTZ5iv-3dH5cthWJypNho7L8Cxq6iI2nbZkKZEIY=w1366-h596" /> </div><br><div class="header-mail" style="border-bottom: 1px solid gray;padding-bottom: 9px;color: #607D8B;font-size: 15px;font-weight: 600;">Dear <span>[username]</span></div><div class="content-mail"><div class="topCont-mail"><p>Its to inform that administrator has rest the password.</p></div><div class="passowrd-mail"><p style="font-weight:bold;">your temporolly password - <span style="font-weight: bold;color: #ffffff;background-color: #009688;padding: 5px;">[tempassword]</span></p></div><div class="bottom-mail" style="font-size:12px;color:red"><p>Note : This temporary password will be expired within <label style="font-weight:bold">[EXPTIME] hr</label>.<br> If any concern, please contact the administrator for further support.</p></div></div><div class="footer-mail"><p style="border-top: 1px solid gray; padding-top: 9px; color: #607D8B;font-size:15px;font-weight: 600;">Regards,</p></div></div></body></html>';
  
  
  
  INSERT INTO EPIC_TLE_TASK VALUES (13, 'Reset');
  INSERT INTO EPIC_TLE_STATUS VALUES (10, 'Forget');
  INSERT INTO EPIC_TLE_SECTION_TASK VALUES ('0101', 13);
  
  INSERT INTO EPIC_TLE_TASK VALUES (12, 'Send');
  INSERT INTO EPIC_TLE_STATUS VALUES (8, 'Locked');
  INSERT INTO EPIC_TLE_STATUS VALUES (9, 'Waiting For Password');
  
  
  
  DROP TABLE EPIC_TLE_FOUNDNIISTATUS;
  DROP TABLE EPIC_TLE_SYS_BLOCK_BIN;



ALTER TABLE EPIC_TLE_INITCONFIG DROP COLUMN HSM_SLOT;
ALTER TABLE EPIC_TLE_INITCONFIG DROP COLUMN HSM_KEY_UTILITY_VERSION;
ALTER TABLE EPIC_TLE_INITCONFIG DROP COLUMN PSGPASSWORD;


ALTER TABLE EPIC_TLE_TERMINAL_REFPROFILE RENAME TO EPIC_TLE_TERMINAL_RISK_PROFILE ;

ALTER TABLE EPIC_TLE_TERMINAL RENAME COLUMN ETMKSESSIONKEY TO ETMK ;
ALTER TABLE EPIC_TLE_TERMINAL RENAME COLUMN EMKESESSIONKEY TO EMEK ;
ALTER TABLE EPIC_TLE_TERMINAL RENAME COLUMN REF_PROFILE_NUM TO RISK_PROFILE_ID ;

//////////////////////added by gayan (2018/02/21)///////////////
DROP TABLE EPIC_TLE_BLOCK_BIN;

CREATE TABLE EPIC_TLE_BLOCK_BIN
(
  PROFILE_ID  NUMBER DEFAULT 6  NOT NULL
    CONSTRAINT PROFILE_ID ON DELETE CASCADE REFERENCES EPIC_TLE_BIN_PROFILE,
  LOW_VALUE   NUMBER            NOT NULL,
  UPPER_VALUE NUMBER            NOT NULL,
  DATETIME    TIMESTAMP(6) DEFAULT SYSDATE,
  CONSTRAINT PRIMARY00004 
  PRIMARY KEY (PROFILE_ID, LOW_VALUE, UPPER_VALUE)
)
/

ALTER TABLE EPIC_TLE_LOCALBIN ADD CATEGORY_CODE NUMBER DEFAULT 0;



======================================2018-02-21 ================================
================================added by ridmi=======================================
1. add new tables

CREATE TABLE EPIC_TLE_SMS_PROFILE
(
  SMS_PROFILE_ID NUMBER(10) NOT NULL
  PRIMARY KEY,
  PROFILE_NAME   NVARCHAR2(50) DEFAULT NULL,
  STATUS         NUMBER     NOT NULL
  CONSTRAINT STATUS
  REFERENCES EPIC_TLE_STATUS,
  CERATED_DATE   TIMESTAMP(6)  DEFAULT sysdate
)

CREATE TABLE EPIC_TLE_SMS_PROFILE_INFO
(
  ID           NUMBER(10) NOT NULL
  PRIMARY KEY,
  PROFILE_ID   NUMBER(10)
  CONSTRAINT SMS_PROFILE_ID
  REFERENCES EPIC_TLE_SMS_PROFILE ON DELETE CASCADE,
  MOBILE_NO    NVARCHAR2(15)  DEFAULT NULL,
  EMAIL        NVARCHAR2(100) DEFAULT NULL,
  CERATED_DATE TIMESTAMP(6)   DEFAULT sysdate
)

2. insert data to epic_tle_section table
        insert into EPIC_TLE_SECTION values ('0606','06','SMS Profile','smsProf');

3. insert data to epic_tle_section_task table
      INSERT INTO EPIC_TLE_SECTION_TASK VALUES ('0606', '01');
      INSERT INTO EPIC_TLE_SECTION_TASK VALUES ('0606', '02');
      INSERT INTO EPIC_TLE_SECTION_TASK VALUES ('0606', '03');
      INSERT INTO EPIC_TLE_SECTION_TASK VALUES ('0606', '04');

4. create new table
 
       CREATE TABLE EPIC_TLE_SMS_FILTER
(
  ID           NUMBER     NOT NULL
    PRIMARY KEY,
  PROFILE_ID   NUMBER(10) NOT NULL
    CONSTRAINT FK_SMS_PROFILE_ID
    REFERENCES EPIC_TLE_SMS_PROFILE ON DELETE CASCADE,
  MESSAGE      NVARCHAR2(250) DEFAULT NULL,
  CERATED_DATE TIMESTAMP(6)   DEFAULT sysdate
)
   

 

